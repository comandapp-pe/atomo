<%= render 'admin/header' %>

<main class="container p-4">
  <% if notice %>
    <div id="notice" class="alert alert-success alert-dismissible fade show">
      <%= notice %> <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <div class="d-flex justify-content-between align-items-center mb-2">
    <h1>Productos</h1>

    <%= link_to 'Nuevo Producto', new_admin_product_path, class: 'btn btn-primary' %>
  </div>

  <div class="table-responsive">
    <table class="table">
      <thead>
      <tr>
        <th>Nombre</th>
        <th>Código de 2Checkout</th>
        <th>Publicado</th>
        <th colspan="2"></th>
      </tr>
      </thead>

      <tbody>
      <% if @products.empty? %>
        <tr>
          <td colspan="5" class="text-center">No hay datos disponibles.</td>
        </tr>
      <% else %>
        <% @products.each do |product| %>
          <tr>
            <td><%= product.name %></td>
            <td><%= product.checkout_code %></td>
            <td><%= product.published ? 'Sí' : 'No' %></td>
            <td><%= link_to 'Ver detalle', [:admin, product], class: 'text-decoration-none' %></td>
            <td><%= link_to 'Borrar', admin_product_path(product), method: :delete, data: { confirm: "¿Estás seguro de borrar '#{product.name}'?" }, class: 'text-decoration-none' %></td>
          </tr>
        <% end %>
      <% end %>
      </tbody>
    </table>
  </div>
</main>